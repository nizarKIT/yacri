(function(a){a.fn.prepareTransition=function(){return this.each(function(){var b=a(this);b.one("TransitionEnd webkitTransitionEnd transitionend oTransitionEnd",function(){b.removeClass("is-transitioning")});var c=["transition-duration","-moz-transition-duration","-webkit-transition-duration","-o-transition-duration"],d=0;a.each(c,function(a2,c2){d=parseFloat(b.css(c2))||d}),d!=0&&(b.addClass("is-transitioning"),b[0].offsetWidth)})}})(jQuery);var afterResize=function(){var t={};return function(callback,ms,uniqueId){uniqueId||(uniqueId="Don't call this twice without a uniqueId"),t[uniqueId]&&clearTimeout(t[uniqueId]),t[uniqueId]=setTimeout(callback,ms)}}();window.theme=window.theme||{},theme.cacheSelectors=function(){theme.cache={$w:$(window),$body:$("body"),$mobileNavTrigger:$("#MobileNavTrigger"),$mobileNav:$("#MobileNav"),$mobileSublistTrigger:$(".mobile-nav__sublist-trigger"),cartNoteAdd:".cart__note-add",cartNote:".cart__note",$searchInput:$(".search-bar__input"),$searchSubmit:$(".search-bar__submit")}},theme.init=function(){theme.cacheSelectors(),theme.mobileNav(),theme.cartPage(),theme.drawersInit()},theme.cartPage=function(){theme.cache.$body.on("click",theme.cache.cartNoteAdd,function(){$(this).addClass("is-hidden"),$(theme.cache.cartNote).addClass("is-active")})},theme.drawersInit=function(){$("#PageContainer").addClass("drawer-page-content"),$(".js-drawer-open-top").attr("aria-controls","SearchDrawer").attr("aria-expanded","false"),theme.SearchDrawer=new theme.Drawers("SearchDrawer","top",{onDrawerOpen:theme.searchFocus})},theme.searchFocus=function(){theme.cache.$searchInput.focus(),theme.cache.$searchInput[0].setSelectionRange(0,theme.cache.$searchInput[0].value.length)},theme.searchSubmit=function(){theme.cache.$searchSubmit.on("click",function(evt){theme.cache.$searchInput.val().length==0&&(evt.preventDefault(),theme.cache.$searchInput.focus())})},theme.mobileNav=function(){theme.cache.$mobileNavTrigger.on("click",function(){theme.cache.$mobileNav.slideToggle(220)}),theme.cache.$mobileSublistTrigger.on("click",function(evt){var $el=$(this);evt.preventDefault(),$el.toggleClass("is-active").next(".mobile-nav__sublist").slideToggle(200)})},theme.Drawers=function(){var Drawer=function(id,position,options){var defaults={close:".js-drawer-close",open:".js-drawer-open-"+position,openClass:"js-drawer-open",dirOpenClass:"js-drawer-open-"+position};if(this.$nodes={parent:$("body, html"),page:$("#PageContainer")},this.config=$.extend(defaults,options),this.position=position,this.$drawer=$("#"+id),!this.$drawer.length)return!1;this.drawerIsOpen=!1,this.init()};return Drawer.prototype.init=function(){$(this.config.open).on("click",$.proxy(this.open,this)),this.$drawer.on("click",this.config.close,$.proxy(this.close,this))},Drawer.prototype.open=function(evt){var externalCall=!1;if(evt?evt.preventDefault():externalCall=!0,evt&&evt.stopPropagation&&(evt.stopPropagation(),this.$activeSource=$(evt.currentTarget)),this.drawerIsOpen&&!externalCall)return this.close();this.$drawer.prepareTransition(),this.$nodes.parent.addClass(this.config.openClass+" "+this.config.dirOpenClass),this.drawerIsOpen=!0,this.trapFocus({$container:this.$drawer,$elementToFocus:this.$drawer.find(".drawer__close-button"),namespace:"drawer_focus"}),this.config.onDrawerOpen&&typeof this.config.onDrawerOpen=="function"&&(externalCall||this.config.onDrawerOpen()),this.$activeSource&&this.$activeSource.attr("aria-expanded")&&this.$activeSource.attr("aria-expanded","true"),this.$nodes.parent.on("keyup.drawer",$.proxy(function(evt2){if(evt2.keyCode===27)return this.close(),!1},this)),this.$nodes.page.on("touchmove.drawer",function(){return!1}),this.$nodes.page.on("click.drawer",$.proxy(function(){return this.close(),!1},this))},Drawer.prototype.close=function(){this.drawerIsOpen&&($(document.activeElement).trigger("blur"),this.$drawer.prepareTransition(),this.$nodes.parent.removeClass(this.config.dirOpenClass+" "+this.config.openClass),this.drawerIsOpen=!1,this.removeTrapFocus({$container:this.$drawer,namespace:"drawer_focus"}),this.$nodes.page.off(".drawer"),this.$nodes.parent.off(".drawer"))},Drawer.prototype.trapFocus=function(options){var eventName=options.eventNamespace?"focusin."+eventNamespace:"focusin";options.$elementToFocus||(options.$elementToFocus=options.$container),options.$container.attr("tabindex","-1"),options.$elementToFocus.focus(),$(document).on(eventName,function(evt){options.$container[0]!==evt.target&&!options.$container.has(evt.target).length&&options.$container.focus()})},Drawer.prototype.removeTrapFocus=function(options){var eventName=options.namespace?"focusin."+options.namespace:"focusin";options.$container&&options.$container.length&&options.$container.removeAttr("tabindex"),$(document).off(eventName)},Drawer}(),$(theme.init);
//# sourceMappingURL=/cdn/shop/t/2/assets/theme.js.map?v=183266978712685453701549866665
